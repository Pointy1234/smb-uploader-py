# SMB3 File Processor - Python –≤–µ—Ä—Å–∏—è

–≠—Ç–æ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ Python –≤–µ—Ä—Å–∏—è Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ SMB3 —à–∞—Ä—ã. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ SMB3 –ø—Ä–æ—Ç–æ–∫–æ–ª** —Å –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –°—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –ø–∞–ø–∫–∏ `input` –Ω–∞ SMB3 —Å–µ—Ä–≤–µ—Ä–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ base64 —Ñ–æ—Ä–º–∞—Ç–µ –Ω–∞ API endpoint –∏ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –≤ –ø–∞–ø–∫—É `output`.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–¢–æ–ª—å–∫–æ SMB3 –ø—Ä–æ—Ç–æ–∫–æ–ª** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SMB 3.0+
- ‚úÖ **–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –¥–ª—è SMB3
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å offline –æ–±—Ä–∞–∑–∞–º–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (PNG, JPG, JPEG, GIF, BMP, TIFF, WebP)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ Health check endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app.py                 # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ README_smb_processor.md   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º

#### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:

```env
# SMB3 Configuration (—Ç–æ–ª—å–∫–æ SMB3 –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
SMB_HOST=192.168.1.100
SMB_SHARE=shared_folder
SMB_USERNAME=your_username
SMB_PASSWORD=your_password
SMB_DOMAIN=WORKGROUP

# API Configuration
API_URL=http://your-api-server:8080/api/process

# Server Configuration
PORT=3000

# SMB3 Directories
SMB_INPUT_DIR=input
SMB_OUTPUT_DIR=output
```

#### 2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Docker (—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º)

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up --build -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f smb-processor
```

### üîí –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –º–∞—à–∏–Ω–µ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º

```bash
# –ü–æ–ª–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ offline –ø–∞–∫–µ—Ç–æ–≤
bash prepare_full_offline.sh

# –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞—Ä—Ö–∏–≤ smb3-processor-full-offline.tar.gz
```

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –∞—Ä—Ö–∏–≤ –Ω–∞ —Ü–µ–ª–µ–≤—É—é –º–∞—à–∏–Ω—É
scp smb3-processor-full-offline.tar.gz target_machine:/tmp/

# –ù–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ:
cd /tmp
tar -xzf smb3-processor-full-offline.tar.gz
cd smb3-processor-full-offline/

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Å –≤–∞—à–∏–º–∏ SMB3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

# –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
bash install_full_offline.sh
```

### üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º
pip install -r requirements.txt
python app.py

# –î–ª—è offline —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
bash install_offline.sh  # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ offline –ø–∞–∫–µ—Ç–æ–≤
python app.py
```

## API Endpoints

### GET /process
–ó–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –ø–∞–ø–∫–∏ `input` –Ω–∞ SMB —Å–µ—Ä–≤–µ—Ä–µ.

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ output"
}
```

**–û—à–∏–±–∫–∞:**
```json
{
  "error": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "timestamp": "2025-06-25 02:26:44"
}
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ SMB3 —Å–µ—Ä–≤–µ—Ä—É

- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ SMB –≤–µ—Ä—Å–∏—è 3.0 –∏–ª–∏ –≤—ã—à–µ** (SMB 3.0.0, 3.0.2, 3.1.1)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (message signing)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å NTLM –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- –ü–∞–ø–∫–∏ `input` –∏ `output` –Ω–∞ SMB3 —à–∞—Ä–µ
- –ü—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–í–Ω–∏–º–∞–Ω–∏–µ**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫–∞–∂–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å SMB 1.x –∏ 2.x –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- PNG (.png)
- JPEG (.jpg, .jpeg)
- GIF (.gif)
- BMP (.bmp)
- TIFF (.tiff)
- WebP (.webp)

## –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SMB** - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å SMB —Å–µ—Ä–≤–µ—Ä–æ–º
2. **–¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏** - –°–æ–∑–¥–∞–µ—Ç—Å—è –∏ —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
3. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏** - –ü–æ–ª—É—á–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø–∞–ø–∫–∏ `input`
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –û—Ç–±–∏—Ä–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:**
   - –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å SMB
   - –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ base64
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ API endpoint
   - –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–ø–∫—É `output`

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SMB
- –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ API
- –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:
```
2025-06-25 02:26:44 - INFO - ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SMB: \\192.168.1.100\shared
2025-06-25 02:26:44 - INFO - [PROCESS] –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏–∑ SMB
2025-06-25 02:26:44 - INFO - [PROCESS] –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 3
2025-06-25 02:26:44 - INFO - [PROCESS] –§–∞–π–ª image1.jpg —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ API
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### SMB3 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ SMB3 –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
smbclient -L //SMB_HOST -U SMB_USERNAME --max-protocol=SMB3

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º SMB3
smbclient //SMB_HOST/SMB_SHARE -U SMB_USERNAME --max-protocol=SMB3

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å SMB 3.x)
smbclient //SMB_HOST/SMB_SHARE -U SMB_USERNAME -d 3
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ SMB3

**–û—à–∏–±–∫–∞: "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –¥–∏–∞–ª–µ–∫—Ç"**
- –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SMB3
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMB –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SMB3 –≤–∫–ª—é—á–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

**–û—à–∏–±–∫–∞: "–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π"**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ SMB —Å–µ—Ä–≤–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ–º–µ–Ω–∞

**–û—à–∏–±–∫–∞: "–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–º–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ SMB3 —à–∞—Ä–µ

### Docker –ø—Ä–æ–±–ª–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (offline –≤–µ—Ä—Å–∏—è)
docker logs smb-file-processor-offline

# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker exec -it smb-file-processor-offline /bin/bash

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose -f docker-compose.offline.yml restart
```

### Offline —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞: "–û–±—Ä–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è offline –æ–±—Ä–∞–∑–æ–≤
ls -la docker_images/

# –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker load -i docker_images/python-3.11-slim.tar
docker load -i docker_images/smb3-processor-offline.tar
```

**–ü—Ä–æ–±–ª–µ–º–∞: "Python –ø–∞–∫–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ offline –ø–∞–∫–µ—Ç–æ–≤
ls -la offline_packages/

# –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
pip install --no-index --find-links ./offline_packages -r ./offline_packages/requirements-offline.txt
```

### –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ SMB3 —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 445
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è SMB3 —Ç—Ä–∞—Ñ–∏–∫–∞
- –î–ª—è Docker –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–µ—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ `--network=host`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SMB3 –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ç–µ–≤—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º

## –†–∞–∑–ª–∏—á–∏—è —Å Node.js –≤–µ—Ä—Å–∏–µ–π

| –ê—Å–ø–µ–∫—Ç | Node.js | Python |
|--------|---------|--------|
| SMB –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ | smb2 | smbprotocol |
| –í–µ–± —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ | Express | Flask |
| Async/await | –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ |
| –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ | ~150MB | ~200MB |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è | –°–æ–ø–æ—Å—Ç–∞–≤–∏–º–∞—è |

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤: –¥–æ 100 —Ñ–∞–π–ª–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤: –¥–æ 50MB –Ω–∞ —Ñ–∞–π–ª
- –ü–∞–º—è—Ç—å: ~50-100MB –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- CPU: –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ, I/O bound –æ–ø–µ—Ä–∞—Ü–∏–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–∞—Ä–æ–ª–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±—Ä–∞–∑–µ
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/health` endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
# –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
curl http://localhost:3000/health

# –° Docker
curl http://$(docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' smb-processor):3000/health
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º.
